\hypertarget{_e_c12_p_8cpp_source}{}\subsection{E\+C12\+P.\+cpp}
\label{_e_c12_p_8cpp_source}\index{/home/peer23peer/programmingspace/\+V\+S\+A/\+Vision\+Soil\+Analyzer/src/\+Soil\+Hardware/\+E\+C12\+P.\+cpp@{/home/peer23peer/programmingspace/\+V\+S\+A/\+Vision\+Soil\+Analyzer/src/\+Soil\+Hardware/\+E\+C12\+P.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* Copyright (C) Jelle Spijker - All Rights Reserved}
00002 \textcolor{comment}{ * Unauthorized copying of this file, via any medium is strictly prohibited}
00003 \textcolor{comment}{ * and only allowed with the written consent of the author (Jelle Spijker)}
00004 \textcolor{comment}{ * This software is proprietary and confidential}
00005 \textcolor{comment}{ * Written by Jelle Spijker <spijker.jelle@gmail.com>, 2015}
00006 \textcolor{comment}{ */}
00007 
00008 \textcolor{preprocessor}{#include "\hyperlink{_e_c12_p_8h}{EC12P.h}"}
00009 
00010 \textcolor{keyword}{namespace }\hyperlink{namespace_hardware}{Hardware} \{
\hypertarget{_e_c12_p_8cpp_source_l00012}{}\hyperlink{class_hardware_1_1_e_c12_p_a0b5c45d061ad98239e816e3845535d15}{00012} \hyperlink{class_hardware_1_1_e_c12_p_a0b5c45d061ad98239e816e3845535d15}{EC12P::EC12P}() \{
00013   \textcolor{comment}{// Init Rotary button}
00014   \hyperlink{class_hardware_1_1_e_c12_p_a6d91a7b1767f080af8c33bacdae1dd1d}{Button}.\hyperlink{class_hardware_1_1_g_p_i_o_a4a9fc2f7be304a6b23c2a2876b4c6bf9}{SetDirection}(\hyperlink{class_hardware_1_1_g_p_i_o_a7507431d6341c146f22dcdb21b78ffd4a5614339496b61db558bd9a26a327088e}{GPIO::Input});
00015   \hyperlink{class_hardware_1_1_e_c12_p_a6d91a7b1767f080af8c33bacdae1dd1d}{Button}.\hyperlink{class_hardware_1_1_g_p_i_o_a4d4ab3b0f1ee53590a300bfbcccae895}{SetEdge}(\hyperlink{class_hardware_1_1_g_p_i_o_a9a7595aabdac9aec75f22e8b86342162afbb0aadc6c0311beb25d5a056c61ed46}{GPIO::Rising});
00016 
00017   \textcolor{comment}{// Init Encoder}
00018   \hyperlink{class_hardware_1_1_e_c12_p_abfe8d6ea8948c77d4866ca8a05dbebe9}{Rotary}.\hyperlink{class_hardware_1_1e_q_e_p_ab8b1babd8dc96f5052be96ed6e65e111}{set\_period}(100000000L);
00019 
00020   \textcolor{comment}{// Init Encoder color}
00021   \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a4a9fc2f7be304a6b23c2a2876b4c6bf9}{SetDirection}(\hyperlink{class_hardware_1_1_g_p_i_o_a7507431d6341c146f22dcdb21b78ffd4a72432a9b39a6e45297b1158da8bb60eb}{GPIO::Output});
00022   \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a4a9fc2f7be304a6b23c2a2876b4c6bf9}{SetDirection}(\hyperlink{class_hardware_1_1_g_p_i_o_a7507431d6341c146f22dcdb21b78ffd4a72432a9b39a6e45297b1158da8bb60eb}{GPIO::Output});
00023   \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a4a9fc2f7be304a6b23c2a2876b4c6bf9}{SetDirection}(\hyperlink{class_hardware_1_1_g_p_i_o_a7507431d6341c146f22dcdb21b78ffd4a72432a9b39a6e45297b1158da8bb60eb}{GPIO::Output});
00024   \hyperlink{class_hardware_1_1_e_c12_p_a9ef5c813c9eb38db1c236d1be0d23911}{SetPixelColor}(\hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaa0a40adb50c361b3ee3a6faca241d7c7a}{None});
00025 
00026   \hyperlink{class_hardware_1_1_e_c12_p_a81af8167f5a5192d8575ebad04952d57}{threadRunning} = \textcolor{keyword}{false};
00027 \}
00028 
\hypertarget{_e_c12_p_8cpp_source_l00030}{}\hyperlink{class_hardware_1_1_e_c12_p_a22ea7087bba0f459caed9f2fb6cd7412}{00030} \hyperlink{class_hardware_1_1_e_c12_p_a22ea7087bba0f459caed9f2fb6cd7412}{EC12P::~EC12P}() \{\}
00031 
\hypertarget{_e_c12_p_8cpp_source_l00035}{}\hyperlink{class_hardware_1_1_e_c12_p_a9ef5c813c9eb38db1c236d1be0d23911}{00035} \textcolor{keywordtype}{void} \hyperlink{class_hardware_1_1_e_c12_p_a9ef5c813c9eb38db1c236d1be0d23911}{EC12P::SetPixelColor}(\hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aa}{Color} value) \{
00036   \textcolor{keywordflow}{switch} (value) \{
00037   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaa3b57c8754eb52c7023d81c7c45687f05}{Hardware::EC12P::Red}:
00038     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00039     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00040     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00041     \textcolor{keywordflow}{break};
00042   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaab5841c141282166e57407746841ff248}{Hardware::EC12P::Pink}:
00043     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00044     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00045     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00046     \textcolor{keywordflow}{break};
00047   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaa3f67a6d3b6004f86b8e4a477b3c5f915}{Hardware::EC12P::Blue}:
00048     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00049     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00050     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00051     \textcolor{keywordflow}{break};
00052   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaaac948b76451e5914627c3b482c5054c4}{Hardware::EC12P::SkyBlue}:
00053     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00054     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00055     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00056     \textcolor{keywordflow}{break};
00057   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaafaadad2fea189e40df690d3bde44ac28}{Hardware::EC12P::Green}:
00058     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00059     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00060     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00061     \textcolor{keywordflow}{break};
00062   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaa25b4723962c85776a4ce70b8eee81263}{Hardware::EC12P::Yellow}:
00063     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00064     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00065     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00066     \textcolor{keywordflow}{break};
00067   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaacd1663fa4d06aa68eca32bbf370d9e15}{Hardware::EC12P::White}:
00068     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00069     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00070     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93471c709b9d95bfaef4794b4c41e22c}{GPIO::High});
00071     \textcolor{keywordflow}{break};
00072   \textcolor{keywordflow}{case} \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aaa0a40adb50c361b3ee3a6faca241d7c7a}{Hardware::EC12P::None}:
00073     \hyperlink{class_hardware_1_1_e_c12_p_a0a4f03a37d709349994e800e44f5c781}{R}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00074     \hyperlink{class_hardware_1_1_e_c12_p_a326f00b2047ecb58ee1e7e894dc61ad3}{B}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00075     \hyperlink{class_hardware_1_1_e_c12_p_a7afd63c14e12d861c8b20614ef34d70e}{G}.\hyperlink{class_hardware_1_1_g_p_i_o_a2564893797de6a2dab596c4fc990b919}{SetValue}(\hyperlink{class_hardware_1_1_g_p_i_o_ad357201dc1ad13ad96ba1773108a5f6da93de7d5aa4e577175e4fe1fcb0206a85}{GPIO::Low});
00076     \textcolor{keywordflow}{break};
00077   \}
00078   \hyperlink{class_hardware_1_1_e_c12_p_a1bc6223c152c6d9f30304b92069f05c0}{PixelColor} = value;
00079 \}
00080 
\hypertarget{_e_c12_p_8cpp_source_l00082}{}\hyperlink{class_hardware_1_1_e_c12_p_aa2247dfecd78d1a384b1ba1d6e8d62e8}{00082} \textcolor{keywordtype}{void} \hyperlink{class_hardware_1_1_e_c12_p_aa2247dfecd78d1a384b1ba1d6e8d62e8}{EC12P::RainbowLoop}(\textcolor{keywordtype}{int} sleepperiod) \{
00083   this->sleepperiod = \hyperlink{class_hardware_1_1_e_c12_p_adff7ed51fd97bac61075c88a06102348}{sleepperiod};
00084   this->\hyperlink{class_hardware_1_1_e_c12_p_a81af8167f5a5192d8575ebad04952d57}{threadRunning} = \textcolor{keyword}{true};
00085   \textcolor{keywordflow}{if} (pthread\_create(&\hyperlink{class_hardware_1_1_e_c12_p_a718a90836ff46cd71d18ce099a656533}{thread}, NULL, \hyperlink{class_hardware_1_1_e_c12_p_ae57007919c8fb89fc45e952de846c90e}{colorLoop}, \textcolor{keyword}{this})) \{
00086     \textcolor{keywordflow}{throw} \hyperlink{class_hardware_1_1_exception_1_1_failed_to_create_thread_exception}{Exception::FailedToCreateThreadException}();
00087   \}
00088 \}
00089 
\hypertarget{_e_c12_p_8cpp_source_l00091}{}\hyperlink{namespace_hardware_a999708509591fcc4884019c76b9f74ed}{00091} \textcolor{keywordtype}{void} *\hyperlink{namespace_hardware_a999708509591fcc4884019c76b9f74ed}{colorLoop}(\textcolor{keywordtype}{void} *value) \{
00092   \textcolor{keywordtype}{int} i = 0;
00093   \hyperlink{class_hardware_1_1_e_c12_p}{EC12P} *ec12p = \textcolor{keyword}{static\_cast<}\hyperlink{class_hardware_1_1_e_c12_p}{EC12P} *\textcolor{keyword}{>}(value);
00094   \hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aa}{EC12P::Color} pcolor;
00095   \textcolor{keywordflow}{while} (ec12p->\hyperlink{class_hardware_1_1_e_c12_p_a81af8167f5a5192d8575ebad04952d57}{threadRunning}) \{
00096     pcolor = \textcolor{keyword}{static\_cast<}\hyperlink{class_hardware_1_1_e_c12_p_a8341f410cd939bf03160fe239bc782aa}{EC12P::Color}\textcolor{keyword}{>}(i);
00097     ec12p->\hyperlink{class_hardware_1_1_e_c12_p_a9ef5c813c9eb38db1c236d1be0d23911}{SetPixelColor}(pcolor);
00098     usleep(ec12p->\hyperlink{class_hardware_1_1_e_c12_p_adff7ed51fd97bac61075c88a06102348}{sleepperiod});
00099     i++;
00100     \textcolor{keywordflow}{if} (i == 6) \{
00101       i = 0;
00102     \}
00103   \}
00104   \textcolor{keywordflow}{return} ec12p;
00105 \}
00106 \}
\end{DoxyCode}
